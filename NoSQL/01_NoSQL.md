# NoSQL (Not Only SQL)



## 등장배경

- 기존 컴퓨팅 시스템은 기업의 업무를 **자동화하고 효율화**하는데 목적이 있음
- 기업의 복잡한 데이터를 저장하고 데이터 간의 관계를 정의하고 분석
- 생성되는 데이터의 양은 한계를 가지고 있음
- 2000년대에 들어서면서 인터넷의 발전과 함께 sns 활성화
- 기존의 기업 시스템에서 볼 수 없었던 대규모 데이터 생산
- 한정된 규모의 복잡성이 높은 데이터에서 단순한 대량의 데이터로 넘어감
- 기존 데이터 저장 시스템으로는 소화하기 힘든 여러가지 한계가 발생되었고 새로운 형태의 데이터 저장 기술을 요구하게 됨
- 구글의 Bigtable, 아마존의 Dynamo 논문이 발표되면서 새로운 데이터 저장 기술을 만들어내는 시발점이 되었고 NoSQL 등장 

> SNS서비스 활성화로 대규모 데이터 생산 > 기존 기업데이터에 비해 매우 단순한 형태 > 복잡성을 띈 데이터베이스 보단 단순 대용량 데이터베이스 기술 요구!





## 특징

- NoSQL은 RDBMS와 다른 형태의 데이터 저장 구조를 총칭
- 제품에 따라 특성이 매우 달라서 한의 제품군으로 정의할 수 없음
- 하나의 고성능 머신을 사용하지 않고 평범한 다수의 일반 pc를 연결하여 데이터를 처리하는 구조를 가짐
- 다수의 서버에 데이터를 상호 복제하여 분산 저장할 수 있기 땜문에 특정 서버에 장애가 발생하여도 데이터 유실이 거의 없음
- 테이블 설계 시 스키마가 정해지지 않기 때문에 유동적으로 데이터 저장 가능





## NoSQL 종류

- key /value Store 
  - 대부분의 NoSQL은 Key/value 개념 지원















```sql
db.prod.find({$or:[  ]})
{ price : {$gte: 1010, $lte: 1020}}
{ price : {$gt: 1070, $lt: 1100}}

db.prod.find({$or:[{ price : {$gte: 1010, $lte: 1020}}, 
                  { price : {$gt: 1070, $lt: 1100}} ]})

for (var i = 1; i <= 100; i++) {
	db.prod.save({
		name: 'name-' + i,
		price: 1000 + i,
		count: i * 10
	})
}
```





데이터가 너무 많기 때문에 자동으로인덱싱 작업이 일어날 수 있도록 해주는 것 noSQL

Rdbms에서는 키를 주는게 일반적

인덱스를 항상 동기화 시킬 필요가 있다.

빈번하게 사용하게되면 컴퓨터에 부하가 일어난다. 



MongoDB는 키가 있냐는게 중요한게 아니라 이런 데이터가 있냐 없냐가 중요

데이터를 주로 저장, 조회만 하고 삭제나 수정이 없는 없무에 적합.



인덱스를 어떻게 지정해 줄수 있을 까?

### 인덱스 확인

```
db.person.getIndexes()
# 데이터 안에 무엇이 들어 있는가? 보는 것
# person안에 데이터가 없지만 먼저 인덱스를 주는 것이 가능
```



### 인덱스 생성 (1: 오름차순, -1: 내림차순)

```
db.person.ensureIndex({ name : 1 })

```



### 인덱스 생성 ( unique : 중복 데이터 저장 불가)

```
db.person.ensureIndex( { name : 1 }, { unique : true})
```



